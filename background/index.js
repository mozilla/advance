!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";n.d(t,"g",function(){return i}),n.d(t,"e",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return u}),n.d(t,"f",function(){return l}),n.d(t,"j",function(){return c}),n.d(t,"h",function(){return h}),n.d(t,"a",function(){return f}),n.d(t,"i",function(){return p});const r=!1;function i(e){r&&console.log(e)}function o(e){r&&console.error(e)}const s="https://laserlike.com",a=".laserlike.com",u={apiServer:"api_server_url",webServer:"web_server_url",extensionOrigin:"extension_origin",userID:"user_id",token:"token",compactMode:"compact_mode",paused:"paused",userDisplayName:"user_display_name",accountDeleted:"account_deleted",newTabUrl:"new_tab_url"},l="FOR_YOU",c={myWindowId:null,paused:!1,userId:0,authToken:"",isLoggingIn:!1,compactMode:!0,accountDeleted:!1,newTabUrl:void 0,API_SERVER:"https://feed.laserlike.com",WEB_SERVER:"https://feed.laserlike.com",activeTabs:{},focusedWindowId:-1},h={get login(){return`${c.API_SERVER}/auth/api/v1/login`},get updateEmail(){return`${c.API_SERVER}/auth/api/v1/update-email`},get emailValidate(){return`${c.API_SERVER}/auth/api/v1/email/validate`},get sendVerification(){return`${c.API_SERVER}/auth/api/v1/email/sendverification?verification_method=2`},get deleteAccount(){return`${c.API_SERVER}/auth/api/v1/delete-account`},get preferences(){return`${c.API_SERVER}/auth/api/v1/user/preferences`},get managePreferences(){return`${c.API_SERVER}/auth/api/v1/user/manage-preferences`},get log(){return`${c.API_SERVER}/logging/api/v1/log`},get trendfeed(){return`${c.API_SERVER}/searchlike/api/v1/trendfeed`},get related(){return`${c.API_SERVER}/searchlike/api/v1/related`},get profile(){return`${c.API_SERVER}/searchlike/api/v1/profile`},get getProfile(){return`${c.API_SERVER}/searchlike/api/v1/get_profile`},get defaultTab(){return`${c.WEB_SERVER}/`},get downloadData(){return`${c.API_SERVER}/account/data/download/`}},f={product_enum:"TrendsAndFriends",os_type:"extension"};function p(e){if(!e)return"";return(e=e.split("#")[0]).startsWith("about:reader?url=")?e=decodeURIComponent(e.slice("about:reader?url=".length)):(e.startsWith("about:")||e.startsWith("chrome:")||e.startsWith("chrome-extension:")||""===e)&&(e=l),e}},function(e,t,n){"use strict";e.exports=b;var r,i=n(10),o=n(8),s=n(5),a=(r="function"==typeof Symbol?function(e){return Symbol(e)}:function(e){return"_"+e})("max"),u=r("length"),l=r("lengthCalculator"),c=r("allowStale"),h=r("maxAge"),f=r("dispose"),p=r("noDisposeOnSet"),d=r("lruList"),g=r("cache");function v(){return 1}function b(e){if(!(this instanceof b))return new b(e);"number"==typeof e&&(e={max:e}),e||(e={});var t=this[a]=e.max;(!t||"number"!=typeof t||t<=0)&&(this[a]=1/0);var n=e.length||v;"function"!=typeof n&&(n=v),this[l]=n,this[c]=e.stale||!1,this[h]=e.maxAge||0,this[f]=e.dispose,this[p]=e.noDisposeOnSet||!1,this.reset()}function y(e,t,n,r){var i=n.value;w(e,i)&&(E(e,n),e[c]||(i=void 0)),i&&t.call(r,i.value,i.key,e)}function m(e,t,n){var r=e[g].get(t);if(r){var i=r.value;w(e,i)?(E(e,r),e[c]||(i=void 0)):n&&e[d].unshiftNode(r),i&&(i=i.value)}return i}function w(e,t){if(!t||!t.maxAge&&!e[h])return!1;var n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[h]&&n>e[h]}function j(e){if(e[u]>e[a])for(var t=e[d].tail;e[u]>e[a]&&null!==t;){var n=t.prev;E(e,t),t=n}}function E(e,t){if(t){var n=t.value;e[f]&&e[f](n.key,n.value),e[u]-=n.length,e[g].delete(n.key),e[d].removeNode(t)}}Object.defineProperty(b.prototype,"max",{set:function(e){(!e||"number"!=typeof e||e<=0)&&(e=1/0),this[a]=e,j(this)},get:function(){return this[a]},enumerable:!0}),Object.defineProperty(b.prototype,"allowStale",{set:function(e){this[c]=!!e},get:function(){return this[c]},enumerable:!0}),Object.defineProperty(b.prototype,"maxAge",{set:function(e){(!e||"number"!=typeof e||e<0)&&(e=0),this[h]=e,j(this)},get:function(){return this[h]},enumerable:!0}),Object.defineProperty(b.prototype,"lengthCalculator",{set:function(e){"function"!=typeof e&&(e=v),e!==this[l]&&(this[l]=e,this[u]=0,this[d].forEach(function(e){e.length=this[l](e.value,e.key),this[u]+=e.length},this)),j(this)},get:function(){return this[l]},enumerable:!0}),Object.defineProperty(b.prototype,"length",{get:function(){return this[u]},enumerable:!0}),Object.defineProperty(b.prototype,"itemCount",{get:function(){return this[d].length},enumerable:!0}),b.prototype.rforEach=function(e,t){t=t||this;for(var n=this[d].tail;null!==n;){var r=n.prev;y(this,e,n,t),n=r}},b.prototype.forEach=function(e,t){t=t||this;for(var n=this[d].head;null!==n;){var r=n.next;y(this,e,n,t),n=r}},b.prototype.keys=function(){return this[d].toArray().map(function(e){return e.key},this)},b.prototype.values=function(){return this[d].toArray().map(function(e){return e.value},this)},b.prototype.reset=function(){this[f]&&this[d]&&this[d].length&&this[d].forEach(function(e){this[f](e.key,e.value)},this),this[g]=new i,this[d]=new s,this[u]=0},b.prototype.dump=function(){return this[d].map(function(e){if(!w(this,e))return{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}},this).toArray().filter(function(e){return e})},b.prototype.dumpLru=function(){return this[d]},b.prototype.inspect=function(e,t){var n="LRUCache {",r=!1;this[c]&&(n+="\n  allowStale: true",r=!0);var i=this[a];i&&i!==1/0&&(r&&(n+=","),n+="\n  max: "+o.inspect(i,t),r=!0);var s=this[h];s&&(r&&(n+=","),n+="\n  maxAge: "+o.inspect(s,t),r=!0);var f=this[l];f&&f!==v&&(r&&(n+=","),n+="\n  length: "+o.inspect(this[u],t),r=!0);var p=!1;return this[d].forEach(function(e){p?n+=",\n  ":(r&&(n+=",\n"),p=!0,n+="\n  ");var i=o.inspect(e.key).split("\n").join("\n  "),a={value:e.value};e.maxAge!==s&&(a.maxAge=e.maxAge),f!==v&&(a.length=e.length),w(this,e)&&(a.stale=!0),a=o.inspect(a,t).split("\n").join("\n  "),n+=i+" => "+a}),(p||r)&&(n+="\n"),n+="}"},b.prototype.set=function(e,t,n){var r=(n=n||this[h])?Date.now():0,i=this[l](t,e);if(this[g].has(e)){if(i>this[a])return E(this,this[g].get(e)),!1;var o=this[g].get(e).value;return this[f]&&(this[p]||this[f](e,o.value)),o.now=r,o.maxAge=n,o.value=t,this[u]+=i-o.length,o.length=i,this.get(e),j(this),!0}var s=new function(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}(e,t,i,r,n);return s.length>this[a]?(this[f]&&this[f](e,t),!1):(this[u]+=s.length,this[d].unshift(s),this[g].set(e,this[d].head),j(this),!0)},b.prototype.has=function(e){return!!this[g].has(e)&&!w(this,this[g].get(e).value)},b.prototype.get=function(e){return m(this,e,!0)},b.prototype.peek=function(e){return m(this,e,!1)},b.prototype.pop=function(){var e=this[d].tail;return e?(E(this,e),e.value):null},b.prototype.del=function(e){E(this,this[g].get(e))},b.prototype.load=function(e){this.reset();for(var t=Date.now(),n=e.length-1;n>=0;n--){var r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{var o=i-t;o>0&&this.set(r.k,r.v,o)}}},b.prototype.prune=function(){var e=this;this[g].forEach(function(t,n){m(e,n,!1)})}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!c){var e=a(f);c=!0;for(var t=l.length;t;){for(u=l,l=[];++h<t;)u&&u[h].run();h=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new d(e,t)),1!==l.length||c||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},,function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(1),o=n.n(i);const s=3e5,a=36e5,u=3600,l=1e7;class c{constructor(e,t){t.cards=t.cards||[],this.url=e,this.count=t.count,this.fetchTime=Date.now(),this.json=JSON.stringify(t.cards),this.ttl=t.ttl||0,this.cards=t.cards}expired(){if(this.url===r.f){const e=Math.max(s,this.ttl);return Date.now()-this.fetchTime>e}return Date.now()-this.fetchTime>a}length(){return this.json.length+this.url.length}}var h,f=new class{constructor(){this.cache=o()({max:l,length:(e,t)=>e.length()+t.length}),this.fetchPromises=o()({max:100,maxAge:6e4})}clear(){this.cache.reset(),this.fetchPromises.reset()}get(e){if(r.j.paused)return new c(e,{});let t=this.cache.get(e);const n=!t||t&&t.expired();Object(r.g)(`$FEED: get ${e}, fetching: ${n}`);let i=this.fetchPromises.get(e);return!i&&n&&(i=this.fetchFeed(e),this.fetchPromises.set(e,i)),t&&!n?t:i}set(e,t){Object(r.g)(`FEED$ saving feed ${e}`);let n=new c(e,t);return this.cache.get(r.f),this.cache.set(e,n),n}fetchFeed(e,t=1){if(r.j.paused)return Promise.resolve(new c(e,{}));Object(r.g)(`FEED$ fetching ${e}`);let n,i=new Headers({Accept:"application/json",Authorization:`Token ${this.authToken}`});if(e===r.f){let e={method:"POST",body:JSON.stringify({client_info:r.a,tf_trend:{key:{type:2}},last_card_pos:"0"}),headers:i,credentials:"include"};n=new Request(r.h.trendfeed,e),t=0}else{let t={method:"POST",body:JSON.stringify({client_info:r.a,search_like:{vibe:[{target:{target:`u:${e}`}}]}}),headers:i,credentials:"include"};n=new Request(r.h.related,t)}return fetch(n).then(n=>n.json().then(n=>{let i={cards:n.cards||[],ttl:1e3*(n.ttl||0)};return i.cards=i.cards.filter(e=>!!e.article),e!==r.f?(i.count=(n.search_like||{}).num_results_to_show_first||i.cards.length,i.count=Math.min(i.count,4)):i.count=i.cards.length,Object(r.g)(`FEED$ got ${i.cards.length} new ${e} cards`),t&&i.ttl&&i.ttl<u&&(Object(r.g)(`retry in ${i.ttl} seconds`),setTimeout(()=>this.fetchFeed(e,t-1),i.ttl)),this.set(e,i)}))}},p=new Map;function d(e){return["about:newtab","about:home"].indexOf(e)>=0}function g(e,t,n=!1){if(r.j.paused||r.j.accountDeleted)return void Object(r.g)(`BG$ extension disabled ${r.j.paused} ${r.j.accountDeleted}`);const i=Object(r.i)(t),o=r.j.activeTabs[e];if(o)if(o.url!==i||n)if(browser.runtime.sendMessage({method:"newUrl",windowId:e,url:t,normalizedUrl:i}),r.j.activeTabs[e]={tabId:o.tabId,url:i},i!==r.f){Object(r.g)(`fetch related feed in window ${e} to: ${t} ${i}`);let n=f.get(i);if(Promise.resolve(n)!=n){Object(r.g)("use existing count"),v(n.count,i)}else{Object(r.g)("got a new count"),v(0,i),n.then(t=>{t.url===r.j.activeTabs[e].url&&v(t.count,i)})}}else Object(r.g)("ignoring for you feed in the background"),v(0);else Object(r.g)(`BG$ same url: ${i}`);else Object(r.e)("Internal error, should never happend!")}function v(e,t){if(!e)return void browser.browserAction.setBadgeText({text:""});let n="green",i=e.toString();if(t==r.f){let e=Date.now()/1e3;h&&e-h<28800&&(i=""),n="red"}browser.browserAction.setBadgeText({text:i}),browser.browserAction.setBadgeBackgroundColor({color:n})}function b(e,t,n=2147483647){Object(r.g)(`setcookie: ${e}, ${t}`);let i={url:r.d,name:e,value:t};r.b&&(i.domain=r.b),0!=n&&(i.expirationDate=n),browser.cookies.set(i)}function y(e){p.set(e,Date.now()),setTimeout(()=>{let t=p.get(e);t&&Date.now()-t>1e3&&(Object(r.g)(`sidebar in ${e} is closed`),p.delete(e))},1100)}browser.tabs.onActivated.addListener(function(e){Object(r.g)(`BG$ activated a new tab: (${e.windowId}, ${e.tabId})`),m(e.tabId).then(t=>{Object(r.g)(t);const n=r.j.activeTabs[e.windowId];n||(r.j.activeTabs[e.windowId]={tabId:e.tabId,url:""}),g(e.windowId,t.url)})}),browser.tabs.onUpdated.addListener(function(e,t){if(Object(r.g)(`BG$ update tab ${t}`),!t.url)return;if(Object(r.g)(`BG$ update tab ${e}: ${t.url}`),d(t.url)&&r.j.newTabUrl){const t={loadReplace:!0,url:r.j.newTabUrl};var n=browser.tabs.update(e,t);n.then(Object(r.g)("update to laserlike done"))}else m(e).then(e=>{g(e.windowId,t.url)})}),browser.tabs.onCreated.addListener(function(e){if(Object(r.g)(`got new tab: ${e.url}`),r.j.newTabUrl&&d(e.url)){const n={loadReplace:!0,url:r.j.newTabUrl};var t=browser.tabs.update(e.id,n);t.then(Object(r.g)("set default to laserlike done"))}}),browser.cookies.onChanged.addListener(function(e){const t=e.cookie;Object(r.g)(`cookie changed: ${JSON.stringify(e)}`),!t||t.domain!==r.b&&"localhost"!==t.domain||(t.name===r.c.apiServer?r.j.API_SERVER=t.value:t.name===r.c.webServer?r.j.WEB_SERVER=t.value:t.name===r.c.newTabUrl?(e.removed?(Object(r.g)("unset laserlike from home page"),r.j.newTabUrl=void 0):(r.j.newTabUrl=t.value,Object(r.g)(`set home to: ${r.j.newTabUrl}`)),browser.runtime.sendMessage({method:"homePageChanged"})):t.name===r.c.accountDeleted&&(e.removed?(r.j.accountDeleted=!1,browser.runtime.sendMessage({method:"loggedOut"})):(r.j.accountDeleted=!0,browser.runtime.sendMessage({method:"loggedIn"}))))}),browser.runtime.onMessage.addListener(function(e){if(Object(r.g)(`BG$: got message: ${e}`),"iframeActive"==e.method)Object(r.g)(`iframe active windowId: ${e.windowId} ${e.uiElement} ${e.url}`),"/toolbar"==e.uiElement&&Object(r.i)(e.url)==r.f&&(h=Date.now()/1e3),r.j.accountDeleted?browser.runtime.sendMessage({method:"loggedOut"}):g(e.windowId,e.url,!0),y(e.windowId);else if("iframeAlive"==e.method)y(e.windowId);else if("read"==e.method){const t=e.card.orig_url||e.card.url;browser.tabs.create({url:t})}return Promise.resolve("Dummy response to keep the console quiet")}),window.onload=function(){browser.tabs.query({}).then(e=>{!e||e.length<1?Object(r.g)("Error initializing: no tabs at all!"):e.forEach(function(e){Object(r.g)(`found tab: ${e.windowId} ${e.id}`),r.j.activeTabs[e.windowId]={tabId:e.id,url:""}})}),browser.cookies.getAll({url:r.d}).then(e=>{if(e.length>0){Object(r.g)(`got ${e.length} cookies`);for(let t of e)Object(r.g)(JSON.stringify(t)),t.name===r.c.apiServer?r.j.API_SERVER=t.value:t.name===r.c.webServer?r.j.WEB_SERVER=t.value:t.name===r.c.paused?r.j.paused="true"===t.value:t.name===r.c.accountDeleted?r.j.accountDeleted="true"===t.value:t.name===r.c.newTabUrl&&(r.j.newTabUrl=t.value);b(r.c.apiServer,r.j.API_SERVER,0),b(r.c.webServer,r.j.WEB_SERVER,0)}else Object(r.g)("no cookies found!"),b(r.c.apiServer,r.j.API_SERVER,0),b(r.c.webServer,r.j.WEB_SERVER,0);b(r.c.extensionOrigin,browser.extension.getURL("/").slice(0,-1),0)})},browser.browserAction.onClicked.addListener(({windowId:e})=>{Object(r.g)(`browser action onClick window id: ${e}`),p.has(e)?(browser.sidebarAction.close(),p.delete(e)):browser.sidebarAction.open()});function m(e){return browser.tabs.query({active:!0}).then(t=>{for(var n=0;n<t.length;n++)if(t[n].id===e)return t[n]})}browser.menus.create({id:"searchLaserlikeId",title:"Search Laserlike for related",contexts:["selection","link"]}),browser.menus.onClicked.addListener(e=>{let t;if("searchLaserlikeId"===e.menuItemId){t=e.linkUrl?`url=${encodeURIComponent(e.linkUrl)}`:`q=${encodeURIComponent(e.selectionText)}`,browser.tabs.create({url:`${r.j.WEB_SERVER}/search?${t}`}).then(function(e){Object(r.g)(`Created new tab: ${e.id}`)},function(e){Object(r.g)(`Error: ${e}`)})}}),browser.menus.onShown.addListener(()=>{browser.menus.update("searchLaserlikeId",{title:"Search Laserlike for related"}),browser.menus.refresh()})},function(e,t){function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)t.push(arguments[r]);return t}function r(e,t){e.tail=new o(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function i(e,t){e.head=new o(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function o(e,t,n,r){if(!(this instanceof o))return new o(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=n,n.Node=o,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)r(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},n.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},n.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,i=this.head;null!==i;)r.push(e.call(t,i.value,this)),i=i.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,i=this.tail;null!==i;)r.push(e.call(t,i.value,this)),i=i.prev;return r},n.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},n.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,o=this.head;null!==o&&i<e;i++)o=o.next;for(;null!==o&&i<t;i++,o=o.next)r.push(o.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,o=this.tail;null!==o&&i>t;i--)o=o.prev;for(;null!==o&&i>e;i--,o=o.prev)r.push(o.value);return r},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,n){(function(e){var r=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,o=i.length,a=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}),u=i[n];n<o;u=i[++n])d(u)||!m(u)?a+=" "+u:a+=" "+s(u);return a},t.deprecate=function(n,r){if(b(global.process))return function(){return t.deprecate(n,r).apply(this,arguments)};if(!0===e.noDeprecation)return n;var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var i,o={};function s(e,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),l(r,e,r.depth)}function a(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function u(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&E(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return v(i)||(i=l(e,i,r)),i}var o=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(g(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(d(t))return e.stylize("null","null")}(e,n);if(o)return o;var s=Object.keys(n),a=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),j(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(n);if(0===s.length){if(E(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(y(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return e.stylize(Date.prototype.toString.call(n),"date");if(j(n))return c(n)}var m,O="",x=!1,_=["{","}"];(f(n)&&(x=!0,_=["[","]"]),E(n))&&(O=" [Function"+(n.name?": "+n.name:"")+"]");return y(n)&&(O=" "+RegExp.prototype.toString.call(n)),w(n)&&(O=" "+Date.prototype.toUTCString.call(n)),j(n)&&(O=" "+c(n)),0!==s.length||x&&0!=n.length?r<0?y(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),m=x?function(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)S(t,String(s))?o.push(h(e,t,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))}),o}(e,n,r,a,s):s.map(function(t){return h(e,n,r,a,t,x)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(m,O,_)):_[0]+O+_[1]}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),S(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=d(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),b(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function f(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function d(e){return null===e}function g(e){return"number"==typeof e}function v(e){return"string"==typeof e}function b(e){return void 0===e}function y(e){return m(e)&&"[object RegExp]"===O(e)}function m(e){return"object"==typeof e&&null!==e}function w(e){return m(e)&&"[object Date]"===O(e)}function j(e){return m(e)&&("[object Error]"===O(e)||e instanceof Error)}function E(e){return"function"==typeof e}function O(e){return Object.prototype.toString.call(e)}function x(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(b(i)&&(i=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!o[n])if(new RegExp("\\b"+n+"\\b","i").test(i)){var r=e.pid;o[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else o[n]=function(){};return o[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=p,t.isNull=d,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=b,t.isRegExp=y,t.isObject=m,t.isDate=w,t.isError=j,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(7);var _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(e=new Date,n=[x(e.getHours()),x(e.getMinutes()),x(e.getSeconds())].join(":"),[e.getDate(),_[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(6),t._extend=function(e,t){if(!t||!m(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,n(2))},function(e,t){var n=Object.prototype.hasOwnProperty;function r(e){if(!(this instanceof r))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),e)if(e instanceof r||"function"==typeof Map&&e instanceof Map)e.forEach(function(e,t){this.set(t,e)},this);else{if(!Array.isArray(e))throw new TypeError("invalid argument");e.forEach(function(e){this.set(e[0],e[1])},this)}}function i(e,t){return e===t||e!=e&&t!=t}function o(e,t){for(var r=0,o="_"+t,s=o;n.call(e,s);s=o+r++)if(i(e[s].key,t))return e[s]}e.exports=r,r.prototype.forEach=function(e,t){t=t||this,Object.keys(this._data).forEach(function(n){"size"!==n&&e.call(t,this._data[n].value,this._data[n].key)},this)},r.prototype.has=function(e){return!!o(this._data,e)},r.prototype.get=function(e){var t=o(this._data,e);return t&&t.value},r.prototype.set=function(e,t){!function(e,t,r){for(var o=0,s="_"+t,a=s;n.call(e,a);a=s+o++)if(i(e[a].key,t))return void(e[a].value=r);e.size++,e[a]=new function(e,t,n){this.key=e,this.value=t,this._index=n}(t,r,a)}(this._data,e,t)},r.prototype.delete=function(e){var t=o(this._data,e);t&&(delete this._data[t._index],this._data.size--)},r.prototype.clear=function(){var e=Object.create(null);e.size=0,Object.defineProperty(this,"_data",{value:e,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(r.prototype,"size",{get:function(){return this._data.size},set:function(e){},enumerable:!0,configurable:!0}),r.prototype.values=r.prototype.keys=r.prototype.entries=function(){throw new Error("iterators are not implemented in this version")}},function(e,t,n){(function(t){"pseudomap"===t.env.npm_package_name&&"test"===t.env.npm_lifecycle_script&&(t.env.TEST_PSEUDOMAP="true"),"function"!=typeof Map||t.env.TEST_PSEUDOMAP?e.exports=n(9):e.exports=Map}).call(this,n(2))}]);