!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){"use strict";r.d(t,"g",function(){return o}),r.d(t,"e",function(){return i}),r.d(t,"d",function(){return a}),r.d(t,"b",function(){return u}),r.d(t,"c",function(){return d}),r.d(t,"f",function(){return l}),r.d(t,"j",function(){return s}),r.d(t,"h",function(){return c}),r.d(t,"a",function(){return f}),r.d(t,"i",function(){return m});const n=!1;function o(e){n&&console.log(e)}function i(e){n&&console.error(e)}const a="https://laserlike.com",u=".laserlike.com",d={apiServer:"api_server_url",webServer:"web_server_url",extensionOrigin:"extension_origin",userID:"user_id",token:"token",compactMode:"compact_mode",paused:"paused",userDisplayName:"user_display_name",accountDeleted:"account_deleted",newTabUrl:"new_tab_url"},l="FOR_YOU",s={myWindowId:null,paused:!1,userId:0,authToken:"",isLoggingIn:!1,compactMode:!0,accountDeleted:!1,newTabUrl:void 0,API_SERVER:"https://feed.laserlike.com",WEB_SERVER:"https://feed.laserlike.com",activeTabs:{},focusedWindowId:-1,isStandalone:!1,extensionOrigin:void 0,userDisplayName:"",userEmail:"",emailConfirmed:!1,sendingEmailDigest:!1,relatedCards:[],forYouCards:[],currentUrl:void 0,originalUrl:void 0,baseUrl:void 0,previewCards:void 0,isDeletingAccount:!1},c={get login(){return`${s.API_SERVER}/auth/api/v1/login`},get updateEmail(){return`${s.API_SERVER}/auth/api/v1/update-email`},get emailValidate(){return`${s.API_SERVER}/auth/api/v1/email/validate`},get sendVerification(){return`${s.API_SERVER}/auth/api/v1/email/sendverification?verification_method=2`},get deleteAccount(){return`${s.API_SERVER}/auth/api/v1/delete-account`},get preferences(){return`${s.API_SERVER}/auth/api/v1/user/preferences`},get managePreferences(){return`${s.API_SERVER}/auth/api/v1/user/manage-preferences`},get log(){return`${s.API_SERVER}/logging/api/v1/log`},get trendfeed(){return`${s.API_SERVER}/searchlike/api/v1/trendfeed`},get related(){return`${s.API_SERVER}/searchlike/api/v1/related`},get profile(){return`${s.API_SERVER}/searchlike/api/v1/profile`},get getProfile(){return`${s.API_SERVER}/searchlike/api/v1/get_profile`},get defaultTab(){return`${s.WEB_SERVER}/`},get downloadData(){return`${s.API_SERVER}/account/data/download/`}},f={product_enum:"TrendsAndFriends",os_type:"extension"};function m(e){if(!e)return"";return(e=e.split("#")[0]).startsWith("about:reader?url=")?e=decodeURIComponent(e.slice("about:reader?url=".length)):(e.startsWith("about:")||e.startsWith("chrome:")||e.startsWith("chrome-extension:")||""===e)&&(e=l),e}},,,function(e,t,r){"use strict";r.r(t);var n,o,i,a,u,d=r(0);function l(e){"homePageChanged"!==e.method&&"loggedOut"!==e.method&&"loggedIn"!==e.method&&"pauseStateChanged"!==e.method?"mapOfOpenWindow"!==e.method?"newUrl"===e.method&&(e.normalizedUrl===d.f?s(e):(Object(d.g)(`${i} got url: ${e.url} ${e.normalizedUrl} myRoot: ${a}`),c(a).then(t=>{const r=Object(d.i)(t.url);Object(d.g)(`${i} current url: ${r}`),e.normalizedUrl===r&&(r===d.f&&(e.clearRelated=!0),s(e))}))):e.sideId===a&&(Object(d.g)(`${i} update my main window to: ${e.mainId}`),a=e.mainId):s(e)}function s(e){if(!o){Object(d.g)(`push to iframe: ${JSON.stringify(e)}`);let t=`${d.j.WEB_SERVER}${i}`;const r=document.querySelector("#panel");r.style.display="block";const a=document.createElement("iframe");a.src=`${t}`,n=new Promise(function(e){a.onload=e}),r.appendChild(a),o=a.contentWindow,Object(d.g)(`append iframe src: ${t}`)}Object(d.g)(`${i} posting to iframe: ${JSON.stringify(e)}`),n.then(()=>o.postMessage(e,d.j.WEB_SERVER))}function c(e){let t={windowId:e||browser.windows.WINDOW_ID_CURRENT,active:!0};return browser.tabs.query(t).then(e=>{if(e&&!(e.length<1))return e[0]})}window.onload=(()=>(u="/sidebar",Object(d.g)(`init iframe: ${u}`),i=u,browser.runtime.onMessage.addListener(l),browser.cookies.get({url:d.d,name:d.c.webServer}).then(e=>{e&&(d.j.WEB_SERVER=e.value)}),void c().then(e=>{a=e.windowId,browser.runtime.sendMessage({method:"iframeActive",windowId:e.windowId,url:e.url,uiElement:i}),setInterval(()=>{browser.runtime.sendMessage({method:"iframeAlive",windowId:e.windowId,uiElement:i})},1e3)})))}]);