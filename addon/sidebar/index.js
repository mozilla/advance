!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){"use strict";(function(e){r.d(t,"i",function(){return o}),r.d(t,"f",function(){return a}),r.d(t,"d",function(){return u}),r.d(t,"b",function(){return s}),r.d(t,"c",function(){return l}),r.d(t,"h",function(){return c}),r.d(t,"l",function(){return d}),r.d(t,"j",function(){return f}),r.d(t,"a",function(){return h}),r.d(t,"k",function(){return m}),r.d(t,"g",function(){return p}),r.d(t,"e",function(){return g});const n="object"==typeof e&&!("boolean"==typeof __DEV__&&!0===__DEV__);var i=!n;function o(e){i&&console.log(`production:${n} `+e)}function a(e){i&&console.error(e)}const u=n?"https://laserlike.com":"http://localhost:3000",s=n?".laserlike.com":void 0,l={apiServer:"api_server_url",webServer:"web_server_url",extensionOrigin:"extension_origin",userID:"user_id",token:"token",compactMode:"compact_mode",paused:"paused",userDisplayName:"user_display_name",accountDeleted:"account_deleted",newTabUrl:"new_tab_url",ignoreDNT:"ignore_do_not_track"},c="FOR_YOU",d={myWindowId:null,paused:!1,userId:0,authToken:"",isLoggingIn:!1,compactMode:!0,accountDeleted:!1,newTabUrl:void 0,ignoreDNT:!1,API_SERVER:n?"https://feed.laserlike.com":"https://feed-dev.laserlike.com",WEB_SERVER:n?"https://feed.laserlike.com":"http://localhost:3000",activeTabs:{},focusedWindowId:-1,isStandalone:!1,extensionOrigin:void 0,userDisplayName:"",userEmail:"",emailConfirmed:!1,sendingEmailDigest:!1,relatedCards:[],forYouCards:[],currentUrl:void 0,originalUrl:void 0,baseUrl:void 0,previewCards:void 0,isDeletingAccount:!1,moreReadNextOpen:!1,fetchRequestCredentials:"include"},f={get login(){return`${d.API_SERVER}/auth/api/v1/login`},get updateEmail(){return`${d.API_SERVER}/auth/api/v1/update-email`},get emailValidate(){return`${d.API_SERVER}/auth/api/v1/email/validate`},get sendVerification(){return`${d.API_SERVER}/auth/api/v1/email/sendverification?verification_method=2`},get deleteAccount(){return`${d.API_SERVER}/auth/api/v1/delete-account`},get preferences(){return`${d.API_SERVER}/auth/api/v1/user/preferences`},get managePreferences(){return`${d.API_SERVER}/auth/api/v1/user/manage-preferences`},get log(){return`${d.API_SERVER}/logging/api/v1/log`},get trendfeed(){return`${d.API_SERVER}/searchlike/api/v1/trendfeed`},get related(){return`${d.API_SERVER}/searchlike/api/v1/related`},get profile(){return`${d.API_SERVER}/searchlike/api/v1/profile`},get getProfile(){return`${d.API_SERVER}/searchlike/api/v1/get_profile`},get defaultTab(){return`${d.WEB_SERVER}/`},get downloadData(){return`${d.API_SERVER}/account/data/download/`}},h={product_enum:"TrendsAndFriends",os_type:"extension"};function m(e){if(!e)return"";return(e=e.split("#")[0]).startsWith("about:reader?url=")?e=decodeURIComponent(e.slice("about:reader?url=".length)):(e.startsWith("about:")||e.startsWith("chrome:")||e.startsWith("chrome-extension:")||""===e)&&(e=c),e}const p={email:"Email Feedback",notInteresting:"Not Interesting",offTopic:"Off-Topic / Spam",block:"Block"};class g{constructor(e){const{card_id:t,position:r,url:n,orig_url:i,title:o,host:a,display_host:u,description:s,card_age_time_sec:l,article:c,feed_type:d,logging_tags:f}=e;this.card_id=t,this.position=r,this.url=n,this.orig_url=i,this.title=o,this.host=u||a,this.description=s,this.card_age_time_sec=l,this.image_url=c?c.image_url:void 0,this.feed_type=d,this.logging_tags=f,this.sentFeedback=void 0}get elementId(){return`card-${this.card_id}`}get unoElementId(){return`undo-${this.card_id}`}get emailBody(){return`{\n      userId: ${d.userId},\n      display_name: ${d.userDisplayName}\n      email: ${d.userEmail}\n      card:\n      { card_id: ${this.card_id},\n        position: ${this.position},\n        url: "${this.url}",\n        orig_url: "${this.orig_url}",\n        host: ${this.host},\n        card_age_time_sec: ${this.card_age_time_sec},\n        image_url: "${this.image_url}",\n      },\n    }`}get length(){return JSON.stringify(this).length}}}).call(this,r(1))},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s,l=[],c=!1,d=-1;function f(){c&&s&&(c=!1,s.length?l=s.concat(l):d=-1,l.length&&h())}function h(){if(!c){var e=u(f);c=!0;for(var t=l.length;t;){for(s=l,l=[];++d<t;)s&&s[d].run();d=-1,t=l.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new m(e,t)),1!==l.length||c||u(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},,function(e,t,r){"use strict";r.r(t);var n,i,o,a,u=r(0);function s(e){"homePageChanged"!==e.method&&"loggedOut"!==e.method&&"loggedIn"!==e.method&&"pauseStateChanged"!==e.method?"mapOfOpenWindow"!==e.method?"newUrl"===e.method&&(e.normalizedUrl===u.h?l(e):(Object(u.i)(`${o} got url: ${e.url} ${e.normalizedUrl} myRoot: ${a}`),c(a).then(t=>{const r=Object(u.k)(t.url);Object(u.i)(`${o} current url: ${r}`),e.normalizedUrl===r&&(r===u.h&&(e.clearRelated=!0),l(e))}))):e.sideId===a&&(Object(u.i)(`${o} update my main window to: ${e.mainId}`),a=e.mainId):l(e)}function l(e){if(!i){let t=`${u.l.WEB_SERVER}${o}`;const r=document.querySelector("#panel");r.style.display="block";const a=document.createElement("iframe");a.src=`${t}`,Object(u.i)(`push to iframe ${t}: ${JSON.stringify(e)}`),n=new Promise(function(e){a.onload=e}),r.appendChild(a),i=a.contentWindow,Object(u.i)(`append iframe src: ${t}`)}Object(u.i)(`${o} posting to iframe ${u.l.WEB_SERVER}: ${JSON.stringify(e)}`),n.then(()=>i.postMessage(e,u.l.WEB_SERVER))}function c(e){let t={windowId:e||browser.windows.WINDOW_ID_CURRENT,active:!0};return browser.tabs.query(t).then(e=>{if(e&&!(e.length<1))return e[0]})}window.onload=(()=>(function(e){Object(u.i)(`init iframe: ${e}`),o=e,browser.runtime.onMessage.addListener(s);let t={url:u.d,name:u.c.webServer};u.b&&(t.firstPartyDomain=u.b),browser.cookies.get(t).then(e=>{e&&(u.l.WEB_SERVER=e.value)}),c().then(e=>{a=e.windowId,browser.runtime.sendMessage({method:"iframeActive",windowId:e.windowId,url:e.url,uiElement:o}),l({method:"newUrl",windowId:a,url:"about:blank",normalizedUrl:u.h}),setInterval(()=>{browser.runtime.sendMessage({method:"iframeAlive",windowId:e.windowId,uiElement:o})},1e3)})})("/sidebar"))}]);